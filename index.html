<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MatchIt â€” Drag & Drop Quiz</title>
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/animations.css">
</head>
<body>

<div class="bg-grid" aria-hidden="true"></div>
<div class="bg-blob bg-blob--purple" aria-hidden="true"></div>
<div class="bg-blob bg-blob--cyan" aria-hidden="true"></div>
<canvas id="confetti-canvas" aria-hidden="true"></canvas>

<!-- START SCREEN -->
<div class="start-screen" id="start-screen" role="dialog" aria-modal="true">
  <div class="start-card">
    <span class="start-card__icon">ğŸ§©</span>
    <h2 class="start-card__title">MatchIt</h2>
    <p class="start-card__sub">Arrastra cada respuesta a la pregunta correcta antes de que se acabe el tiempo.</p>

    <div class="start-card__info">
      <div class="start-info-stat">
        <div class="start-info-stat__num" id="start-q-count">0</div>
        <div class="start-info-stat__label">Preguntas</div>
      </div>
      <div class="start-info-stat">
        <div class="start-info-stat__num" id="start-timer-val">Sin lÃ­mite</div>
        <div class="start-info-stat__label">Tiempo</div>
      </div>
    </div>

    <!-- Timer config inline -->
    <div class="start-timer-config">
      <div class="start-timer-config__title">
        <label class="toggle" style="margin-right:8px">
          <input type="checkbox" id="start-timer-toggle">
          <span class="toggle__track"></span>
        </label>
        Activar temporizador
      </div>
      <div id="start-timer-options" class="start-timer-options" style="display:none">
        <div class="timer-presets" style="justify-content:center;margin-bottom:10px">
          <button class="timer-preset" data-secs="30">30s</button>
          <button class="timer-preset" data-secs="60">1 min</button>
          <button class="timer-preset timer-preset--active" data-secs="120">2 min</button>
          <button class="timer-preset" data-secs="180">3 min</button>
          <button class="timer-preset" data-secs="300">5 min</button>
        </div>
        <div class="timer-custom" style="justify-content:center">
          <label for="start-timer-custom" style="font-size:.82rem;color:var(--text-muted)">O ingresa minutos:</label>
          <input type="number" id="start-timer-custom" min="1" max="120" value="2" style="width:70px;text-align:center">
        </div>
      </div>
    </div>

    <button class="btn btn--accent btn--sm start-card__btn" id="btn-start-game">
      â–¶ &nbsp;Jugar
    </button>
  </div>
</div>

<!-- MAIN APP -->
<main class="app">
  <header class="header">
    <div class="logo">
      Match<span class="logo__accent">It</span>
      <span class="logo__tag">Drag &amp; Drop Quiz</span>
    </div>
    <nav class="header__actions">
      <button class="btn btn--ghost btn--sm" id="btn-download-template">â¬‡ Plantilla</button>
      <button class="btn btn--ghost btn--sm" id="btn-load">ğŸ“‚ Cargar</button>
      <button class="btn btn--ghost btn--sm" id="btn-edit">âœ Editar</button>
      <button class="btn btn--accent btn--sm" id="btn-play-again">â–¶ Jugar</button>
    </nav>
  </header>

  <!-- Timer bar -->
  <div class="timer" id="timer-wrap" style="display:none">
    <div>
      <div class="timer__display timer__display--normal" id="timer-display">00:00</div>
    </div>
    <div class="timer__track-wrap">
      <div class="timer__label" id="timer-label">Tiempo restante</div>
      <div class="timer__track"><div class="timer__fill" id="timer-fill" style="width:100%"></div></div>
    </div>
    <div class="timer__controls">
      <button class="btn btn--ghost btn--sm btn--icon" id="timer-btn-play">â¸</button>
      <button class="btn btn--ghost btn--sm btn--icon" id="timer-btn-reset">â†º</button>
    </div>
  </div>

  <!-- Score bar -->
  <div class="score-bar">
    <div class="score-stat">
      <div class="score-stat__num score-stat__num--correct" id="sc-correct">0</div>
      <div class="score-stat__label">Correctas</div>
    </div>
    <div class="score-divider"></div>
    <div class="score-stat">
      <div class="score-stat__num score-stat__num--wrong" id="sc-wrong">0</div>
      <div class="score-stat__label">Incorrectas</div>
    </div>
    <div class="score-divider"></div>
    <div class="score-stat">
      <div class="score-stat__num score-stat__num--total" id="sc-total">0</div>
      <div class="score-stat__label">Total</div>
    </div>
    <div class="score-divider"></div>
    <div class="score-progress">
      <div class="score-progress__label">
        <span>Emparejados</span><span id="progress-label-pct">0%</span>
      </div>
      <div class="score-progress__track">
        <div class="score-progress__fill" id="progress-fill"></div>
      </div>
    </div>
  </div>

  <!-- Game -->
  <section id="game-wrap">
    <div class="game-area">
      <div>
        <h3 class="col-title">â“ Preguntas</h3>
        <div id="questions-col"></div>
      </div>
      <div>
        <h3 class="col-title">ğŸ’¡ Respuestas</h3>
        <div id="answers-col"></div>
      </div>
    </div>
    <div class="controls">
      <button class="btn btn--success" id="btn-check">âœ“ Verificar</button>
      <button class="btn btn--ghost"   id="btn-reset">â†º Reintentar</button>
      <button class="btn btn--ghost"   id="btn-shuffle-ctrl">ğŸ”€ Mezclar</button>
    </div>
    <section class="feedback-panel" id="feedback-panel">
      <h3 class="feedback-panel__title" id="feedback-title"></h3>
      <div id="feedback-items"></div>
    </section>
  </section>
</main>

<!-- MODAL: Load CSV -->
<div class="modal-overlay" id="modal-load" role="dialog" aria-modal="true">
  <div class="modal">
    <h2 class="modal__title">ğŸ“‚ Cargar preguntas</h2>
    <p class="modal__sub">Sube un archivo CSV (columnas: pregunta, respuesta).</p>
    <div class="file-drop-area" id="file-drop-area">
      <input type="file" id="file-input" accept=".csv">
      <span class="file-drop-area__icon">ğŸ“„</span>
      <p class="file-drop-area__text"><strong>Haz clic o arrastra</strong> tu archivo .csv aquÃ­</p>
    </div>
    <div id="preview-area" style="display:none">
      <p style="font-size:.78rem;color:var(--text-muted);margin-bottom:6px">Vista previa:</p>
      <div class="preview-table-wrap">
        <table class="preview-table">
          <thead><tr><th>#</th><th>Pregunta</th><th>Respuesta</th></tr></thead>
          <tbody id="preview-body"></tbody>
        </table>
      </div>
    </div>
    <div class="modal__actions">
      <button class="btn btn--accent" id="load-confirm-btn" style="display:none">âœ“ Cargar</button>
      <button class="btn btn--ghost"  id="load-cancel-btn">Cancelar</button>
    </div>
  </div>
</div>

<!-- MODAL: Edit -->
<div class="modal-overlay" id="modal-edit" role="dialog" aria-modal="true">
  <div class="modal">
    <h2 class="modal__title">âœ Editar preguntas</h2>
    <p class="modal__sub">Modifica los pares directamente aquÃ­.</p>
    <div id="edit-pairs"></div>
    <button class="btn btn--ghost btn--sm" id="btn-add-pair" style="margin-top:10px">+ Agregar par</button>
    <div class="modal__actions">
      <button class="btn btn--accent" id="edit-save-btn">âœ“ Guardar y jugar</button>
      <button class="btn btn--ghost"  id="edit-cancel-btn">Cancelar</button>
    </div>
  </div>
</div>

<div class="toast" id="toast" role="status" aria-live="polite"></div>

<!-- UN solo script, sin mÃ³dulos ES â€” funciona en cualquier entorno -->
<script src="js/app.js"></script>
</body>
</html>